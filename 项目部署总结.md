# ğŸ¯ CookTip åç«¯é¡¹ç›®éƒ¨ç½²æ€»ç»“

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. é¡¹ç›®åˆå§‹åŒ–
- âœ… åˆ›å»º Node.js + Vercel Serverless é¡¹ç›®
- âœ… é…ç½® `package.json`ã€`vercel.json`
- âœ… è®¾ç½® Git ç‰ˆæœ¬æ§åˆ¶

### 2. æ•°æ®åº“è®¾è®¡
- âœ… è®¾è®¡ 7 å¼ æ ¸å¿ƒæ•°æ®è¡¨ï¼š
  - `users` - ç”¨æˆ·è¡¨
  - `recipes` - é£Ÿè°±è¡¨
  - `comments` - è¯„è®ºè¡¨
  - `favorites` - æ”¶è—è¡¨
  - `likes` - ç‚¹èµè¡¨
  - `shopping_lists` - è´­ç‰©æ¸…å•è¡¨
  - `follows` - å…³æ³¨è¡¨
- âœ… ç¼–å†™ `schema.sql`
- âœ… åˆ›å»ºæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ `init-db.js`
- âœ… åˆ›å»ºæµ‹è¯•æ•°æ®è„šæœ¬ `seed-data.js`

### 3. API å¼€å‘ï¼ˆ12ä¸ª Serverless Functionsï¼‰
- âœ… è®¤è¯ç³»ç»Ÿï¼š`/api/auth/login` - å¾®ä¿¡ç™»å½• + JWT
- âœ… é£Ÿè°±ç›¸å…³ï¼š
  - `/api/recipes` - åˆ—è¡¨æŸ¥è¯¢ + åˆ›å»º
  - `/api/recipes/[id]` - è¯¦æƒ… + æ›´æ–° + åˆ é™¤
  - `/api/categories` - åˆ†ç±»åˆ—è¡¨
  - `/api/search` - æœç´¢åŠŸèƒ½
- âœ… ç”¨æˆ·ç›¸å…³ï¼š
  - `/api/user/info` - ç”¨æˆ·ä¿¡æ¯
  - `/api/user/recipes` - ç”¨æˆ·é£Ÿè°±
  - `/api/users/[id]` - ç”¨æˆ·è¯¦æƒ…
- âœ… äº’åŠ¨åŠŸèƒ½ï¼š
  - `/api/comments` + `/api/comments/[id]` - è¯„è®º
  - `/api/likes` - ç‚¹èµ
  - `/api/favorites` - æ”¶è—

### 4. GitHub éƒ¨ç½²
- âœ… ä»“åº“åœ°å€ï¼šhttps://github.com/David07aa/CookTip-Backend
- âœ… ä»£ç å·²æ¨é€
- âœ… å†å²è®°å½•å®Œæ•´

### 5. Vercel éƒ¨ç½²
- âœ… é¡¹ç›®åœ°å€ï¼šhttps://vercel.com/davids-projects-688aeefc/cooktip-backend
- âœ… ç”Ÿäº§åŸŸåï¼šhttps://cooktip-backend.vercel.app
- âœ… ç¯å¢ƒå˜é‡å·²é…ç½®ï¼š
  - `DB_HOST` = `mysql3.sqlpub.com`
  - `DB_PORT` = `3308`
  - `DB_NAME` = `onefoodlibrary`
  - `DB_USER` = `david_x`
  - `DB_PASSWORD` = `NVRvnX3rP88UyUET`
  - `JWT_SECRET` = `+E77hd5Oj7K46o/yvdfr3EHfkJ8RPRP1NGCDbhe7seQ=`
  - `WECHAT_APPID` = `wx8486e57500ac0a55`
  - `WECHAT_SECRET` = `bd4c652097608bb064350cc7e3b5801c`

### 6. ä»£ç ä¼˜åŒ–
- âœ… åˆå¹¶ç›¸å…³ API å‡å°‘å‡½æ•°æ•°é‡ï¼ˆ14 â†’ 12ï¼‰
- âœ… ç¬¦åˆ Vercel Hobby è®¡åˆ’é™åˆ¶
- âœ… æ·»åŠ å¥åº·æ£€æŸ¥ç«¯ç‚¹
- âœ… ç»Ÿä¸€å“åº”æ ¼å¼

---

## âš ï¸ å½“å‰é—®é¢˜

### æ•°æ®åº“è¿æ¥é—®é¢˜
**é”™è¯¯ä¿¡æ¯ï¼š** `Plugin 'mysql_native_password' is not loaded`

**é—®é¢˜åˆ†æï¼š**
- âœ… æœ¬åœ°æµ‹è¯•ï¼šè¿æ¥æˆåŠŸ
- âŒ Vercel ç¯å¢ƒï¼šè®¤è¯å¤±è´¥
- åŸå› ï¼šSQLPub MySQL ä¸ Vercel Serverless ç¯å¢ƒè®¤è¯ä¸å…¼å®¹

**å·²å°è¯•çš„è§£å†³æ–¹æ¡ˆï¼š**
1. âœ… ä¿®å¤ç¯å¢ƒå˜é‡ BOM/æ¢è¡Œç¬¦é—®é¢˜
2. âœ… æ·»åŠ è®¤è¯æ’ä»¶é…ç½®
3. âœ… è‡ªå®šä¹‰è®¤è¯å¤„ç†å™¨
4. âœ… ç®€åŒ–æ•°æ®åº“é…ç½®
5. âŒ é—®é¢˜ä»ç„¶å­˜åœ¨

---

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ Aï¼šè”ç³» SQLPub æŠ€æœ¯æ”¯æŒ
è¯¢é—®æ˜¯å¦æ”¯æŒ Vercel Serverless ç¯å¢ƒï¼Œéœ€è¦å“ªäº›ç‰¹æ®Šé…ç½®ã€‚

### æ–¹æ¡ˆ Bï¼šè¿ç§»åˆ° PlanetScaleï¼ˆæ¨èï¼‰â­
**æ­¥éª¤ï¼š**
1. æ³¨å†Œ PlanetScale è´¦å·ï¼šhttps://planetscale.com
2. åˆ›å»ºæ•°æ®åº“
3. å¯¼å…¥ schema.sql
4. æ›´æ–° Vercel ç¯å¢ƒå˜é‡
5. é‡æ–°éƒ¨ç½²

**ä¼˜åŠ¿ï¼š**
- ä¸“ä¸º Serverless è®¾è®¡
- å®Œå…¨å…¼å®¹ MySQL
- å…è´¹é¢åº¦ï¼š5GB å­˜å‚¨
- 10åˆ†é’Ÿå®Œæˆè¿ç§»

---

## ğŸ“± å¾®ä¿¡å°ç¨‹åºé…ç½®

```javascript
// config/api.js
const API_BASE_URL = 'https://cooktip-backend.vercel.app/api';

module.exports = {
  baseURL: API_BASE_URL,
  
  // API ç«¯ç‚¹
  login: `${API_BASE_URL}/auth/login`,
  recipes: `${API_BASE_URL}/recipes`,
  recipeDetail: (id) => `${API_BASE_URL}/recipes/${id}`,
  categories: `${API_BASE_URL}/categories`,
  search: `${API_BASE_URL}/search`,
  userInfo: `${API_BASE_URL}/user/info`,
  userRecipes: `${API_BASE_URL}/user/recipes`,
  comments: `${API_BASE_URL}/comments`,
  likes: `${API_BASE_URL}/likes`,
  favorites: `${API_BASE_URL}/favorites`
};
```

---

## ğŸ“‚ é¡¹ç›®æ–‡ä»¶ç»“æ„

```
CookTip-Backend/
â”œâ”€â”€ api/                    # Serverless Functions
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â””â”€â”€ login.js       # å¾®ä¿¡ç™»å½•
â”‚   â”œâ”€â”€ recipes/
â”‚   â”‚   â”œâ”€â”€ index.js       # åˆ—è¡¨ + åˆ›å»º
â”‚   â”‚   â””â”€â”€ [id].js        # è¯¦æƒ… + æ›´æ–° + åˆ é™¤
â”‚   â”œâ”€â”€ categories/
â”‚   â”‚   â””â”€â”€ index.js       # åˆ†ç±»åˆ—è¡¨
â”‚   â”œâ”€â”€ search/
â”‚   â”‚   â””â”€â”€ index.js       # æœç´¢
â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â”œâ”€â”€ info.js        # ç”¨æˆ·ä¿¡æ¯
â”‚   â”‚   â””â”€â”€ recipes.js     # ç”¨æˆ·é£Ÿè°±
â”‚   â”œâ”€â”€ users/
â”‚   â”‚   â””â”€â”€ [id].js        # ç”¨æˆ·è¯¦æƒ…
â”‚   â”œâ”€â”€ comments/
â”‚   â”‚   â”œâ”€â”€ index.js       # è¯„è®ºåˆ—è¡¨ + å‘å¸ƒ
â”‚   â”‚   â””â”€â”€ [id].js        # åˆ é™¤è¯„è®º
â”‚   â”œâ”€â”€ likes/
â”‚   â”‚   â””â”€â”€ index.js       # ç‚¹èµ
â”‚   â””â”€â”€ favorites/
â”‚       â””â”€â”€ index.js       # æ”¶è—
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ db.js              # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ auth.js            # JWT è®¤è¯
â”‚   â””â”€â”€ response.js        # å“åº”å·¥å…·
â”œâ”€â”€ middleware/
â”‚   â””â”€â”€ auth.js            # è®¤è¯ä¸­é—´ä»¶
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ schema.sql         # æ•°æ®åº“ç»“æ„
â”‚   â”œâ”€â”€ init-db.js         # åˆå§‹åŒ–è„šæœ¬
â”‚   â””â”€â”€ seed-data.js       # æµ‹è¯•æ•°æ®
â”œâ”€â”€ package.json
â”œâ”€â”€ vercel.json
â””â”€â”€ README.md
```

---

## ğŸš€ ä¸‹ä¸€æ­¥

### å¦‚æœä½¿ç”¨ SQLPubï¼ˆæ–¹æ¡ˆ Aï¼‰
1. è”ç³» SQLPub æŠ€æœ¯æ”¯æŒ
2. è·å– Serverless å…¼å®¹é…ç½®
3. æ›´æ–°ä»£ç å¹¶é‡æ–°éƒ¨ç½²

### å¦‚æœè¿ç§» PlanetScaleï¼ˆæ–¹æ¡ˆ Bï¼‰
1. æ³¨å†Œå¹¶åˆ›å»ºæ•°æ®åº“
2. æˆ‘ä¼šå¸®ä½ å®Œæˆè¿ç§»ï¼ˆ10åˆ†é’Ÿï¼‰
3. æµ‹è¯•å¹¶éªŒè¯åŠŸèƒ½

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- SQLPub å®˜ç½‘ï¼šhttps://sqlpub.com
- PlanetScale å®˜ç½‘ï¼šhttps://planetscale.com
- Vercel æ–‡æ¡£ï¼šhttps://vercel.com/docs

---

**é¡¹ç›®å·² 99% å®Œæˆï¼Œåªå·®æ•°æ®åº“è¿æ¥çš„æœ€åä¸€æ­¥ï¼** ğŸ‰
