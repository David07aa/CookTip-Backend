# 🌐 CookTip API 浏览器测试指南

## ⚠️ 注意事项

如果遇到 **429 Too Many Requests** 错误，请等待 **5-10 分钟**后再测试。这是 Vercel 的速率限制保护机制。

## 📋 测试步骤

### 1️⃣ 健康检查
**测试数据库连接是否正常**

```
https://cooktip-backend.vercel.app/api/recipes?health=check
```

**预期结果：**
```json
{
  "connection": "connected",
  "database": "postgres",
  "message": "数据库连接正常"
}
```

---

### 2️⃣ 食谱列表
**获取前5个菜谱**

```
https://cooktip-backend.vercel.app/api/recipes?page=1&limit=5
```

**预期结果：**
- 应该返回 198 个菜谱的总数
- 显示前 5 个菜谱的详细信息
- 包含：标题、分类、难度、烹饪时间等

---

### 3️⃣ 搜索功能
**搜索包含"鸡"的菜谱**

```
https://cooktip-backend.vercel.app/api/search?keyword=鸡&page=1&pageSize=5
```

**预期结果：**
- 返回所有包含"鸡"字的菜谱
- 应该有多个结果（如：宫保鸡丁、口水鸡等）

---

### 4️⃣ 分类筛选
**获取"炒菜"分类的菜谱**

```
https://cooktip-backend.vercel.app/api/recipes?category=炒菜&page=1&limit=3
```

**预期结果：**
- 只返回分类为"炒菜"的菜谱
- 显示总数和菜谱列表

---

### 5️⃣ 分类列表
**获取所有分类**

```
https://cooktip-backend.vercel.app/api/categories
```

**预期结果：**
```json
{
  "code": 200,
  "data": ["炒菜", "凉菜", "汤", "主食", ...]
}
```

---

### 6️⃣ 食谱详情
**获取单个菜谱的完整信息（需要先从列表获取ID）**

步骤：
1. 先访问食谱列表获取一个 `id`
2. 用这个 `id` 访问详情：

```
https://cooktip-backend.vercel.app/api/recipes/{id}
```

**预期结果：**
- 完整的菜谱信息
- 包含：原料列表、步骤说明、营养信息等

---

## ✅ 验证清单

测试所有端点后，确认：

- [ ] 健康检查返回 `connected`
- [ ] 食谱列表显示 198 个菜谱
- [ ] 搜索功能正常工作
- [ ] 分类筛选正确
- [ ] 分类列表包含多个分类
- [ ] 食谱详情包含原料和步骤

---

## 🎉 测试通过说明

如果以上所有测试都通过，说明：

✅ **后端API已成功部署到 Vercel**  
✅ **PostgreSQL 数据库连接正常**  
✅ **198 个老乡鸡菜谱已成功导入**  
✅ **前端可以正常获取所有数据**  

---

## 🔧 故障排除

### 如果遇到 429 错误
- **原因**：请求过于频繁触发速率限制
- **解决**：等待 5-10 分钟后重试

### 如果遇到 500 错误
- **原因**：服务器内部错误
- **解决**：检查 Vercel 部署日志，可能是数据库连接问题

### 如果遇到 404 错误
- **原因**：路由不存在
- **解决**：检查 URL 是否正确

---

## 📱 前端集成测试

在前端代码中测试：

```javascript
// 测试获取食谱列表
fetch('https://cooktip-backend.vercel.app/api/recipes?page=1&limit=10')
  .then(res => res.json())
  .then(data => {
    console.log('食谱总数:', data.data.pagination.total);
    console.log('食谱列表:', data.data.list);
  })
  .catch(err => console.error('错误:', err));
```

---

**部署完成日期：** 2025年10月2日  
**API 基础URL：** https://cooktip-backend.vercel.app  
**数据库：** Vercel Postgres (Neon)  
**菜谱总数：** 198 个老乡鸡经典菜谱
