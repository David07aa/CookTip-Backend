# CookTip å‰ç«¯å¯¹æ¥æ–‡æ¡£ - æ–°ç‰ˆ

**æ›´æ–°æ—¶é—´**ï¼š2025-10-09  
**API ç‰ˆæœ¬**ï¼šv1.0  
**åç«¯ç¯å¢ƒ**ï¼šå¾®ä¿¡äº‘æ‰˜ç®¡

---

## ğŸ“‹ ç›®å½•

- [1. API åŸºç¡€é…ç½®](#1-api-åŸºç¡€é…ç½®)
- [2. å®Œæ•´æ¥å£åˆ—è¡¨](#2-å®Œæ•´æ¥å£åˆ—è¡¨)
- [3. è®¤è¯è¯´æ˜](#3-è®¤è¯è¯´æ˜)
- [4. æ¥å£è¯¦æƒ…](#4-æ¥å£è¯¦æƒ…)
- [5. é”™è¯¯å¤„ç†](#5-é”™è¯¯å¤„ç†)
- [6. å°ç¨‹åºé…ç½®](#6-å°ç¨‹åºé…ç½®)

---

## 1. API åŸºç¡€é…ç½®

### 1.1 åŸºç¡€åœ°å€

```javascript
// ç”Ÿäº§ç¯å¢ƒï¼ˆå…¬ç½‘è®¿é—®åœ°å€ï¼‰
const BASE_URL = 'https://yjsp-ytg-191595-4-1367462091.sh.run.tcloudbase.com'
const API_BASE_URL = 'https://yjsp-ytg-191595-4-1367462091.sh.run.tcloudbase.com/api/v1'

// å¯¹è±¡å­˜å‚¨ï¼ˆå›¾ç‰‡ï¼‰
const STORAGE_URL = 'https://796a-yjsp-wxxcx-2g4wvlv66f316313-1367462091.storage.ap-shanghai.myqcloud.com'

// âš ï¸ æ³¨æ„ï¼šå…¬ç½‘åŸŸåä»…ç”¨äºæµ‹è¯•ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½®è‡ªå®šä¹‰åŸŸå
```

### 1.2 è¯·æ±‚é…ç½®

```javascript
// config/api.config.js
const config = {
  apiBaseUrl: 'https://yjsp-ytg-191595-4-1367462091.sh.run.tcloudbase.com/api/v1',
  timeout: 10000,
  tokenKey: 'cooktip_token',
  userInfoKey: 'cooktip_userInfo',
}
```

### 1.3 é€šç”¨å“åº”æ ¼å¼

**æˆåŠŸå“åº”**ï¼š
```json
{
  "code": 200,
  "data": { /* æ•°æ® */ },
  "message": "success"
}
```

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 400,
  "message": "é”™è¯¯ä¿¡æ¯",
  "error": "è¯¦ç»†é”™è¯¯"
}
```

---

## 2. å®Œæ•´æ¥å£åˆ—è¡¨

### ğŸ¥ å¥åº·æ£€æŸ¥

```
GET  /                    # æ ¹è·¯å¾„å¥åº·æ£€æŸ¥
GET  /health              # å¥åº·çŠ¶æ€æ£€æŸ¥
```

### ğŸ“š API æ–‡æ¡£

```
GET  /api/docs            # Swagger API æ–‡æ¡£
```

### ğŸ” è®¤è¯æ¨¡å—

```
POST /api/v1/auth/wx-login         # å¾®ä¿¡ç™»å½•
POST /api/v1/auth/wechat-login     # å¾®ä¿¡ç™»å½•ï¼ˆåˆ«åï¼‰
POST /api/v1/auth/refresh          # åˆ·æ–° Token
POST /api/v1/auth/logout           # é€€å‡ºç™»å½•
```

### ğŸ‘¤ ç”¨æˆ·æ¨¡å—

```
GET    /api/v1/users/me               # è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
PATCH  /api/v1/users/me               # æ›´æ–°å½“å‰ç”¨æˆ·ä¿¡æ¯
GET    /api/v1/users/:userId/recipes  # è·å–ç”¨æˆ·çš„é£Ÿè°±åˆ—è¡¨
GET    /api/v1/users/me/favorites     # è·å–æˆ‘çš„æ”¶è—åˆ—è¡¨
GET    /api/v1/users/:userId/stats    # è·å–ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯
```

### ğŸ³ é£Ÿè°±æ¨¡å—

```
GET    /api/v1/recipes           # è·å–é£Ÿè°±åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æ’åºï¼‰
POST   /api/v1/recipes           # åˆ›å»ºé£Ÿè°±ï¼ˆéœ€ç™»å½•ï¼‰
GET    /api/v1/recipes/:id       # è·å–é£Ÿè°±è¯¦æƒ…
PATCH  /api/v1/recipes/:id       # æ›´æ–°é£Ÿè°±ï¼ˆéœ€ç™»å½•ï¼‰
DELETE /api/v1/recipes/:id       # åˆ é™¤é£Ÿè°±ï¼ˆéœ€ç™»å½•ï¼‰
POST   /api/v1/recipes/:id/like  # ç‚¹èµ/å–æ¶ˆç‚¹èµ
POST   /api/v1/recipes/:id/favorite  # æ”¶è—/å–æ¶ˆæ”¶è—
POST   /api/v1/recipes/:id/view      # å¢åŠ æµè§ˆé‡
```

### ğŸ“ åˆ†ç±»æ¨¡å—

```
GET  /api/v1/categories      # è·å–æ‰€æœ‰åˆ†ç±»
GET  /api/v1/categories/:id  # è·å–åˆ†ç±»è¯¦æƒ…
```

### ğŸ’¬ è¯„è®ºæ¨¡å—

```
GET    /api/v1/comments                      # è·å–æ‰€æœ‰è¯„è®º
GET    /api/v1/recipes/:recipeId/comments    # è·å–é£Ÿè°±çš„è¯„è®º
POST   /api/v1/recipes/:recipeId/comments    # å‘è¡¨è¯„è®ºï¼ˆéœ€ç™»å½•ï¼‰
DELETE /api/v1/comments/:id                  # åˆ é™¤è¯„è®ºï¼ˆéœ€ç™»å½•ï¼‰
POST   /api/v1/comments/:id/like             # ç‚¹èµè¯„è®º
POST   /api/v1/comments/:id/reply            # å›å¤è¯„è®ºï¼ˆéœ€ç™»å½•ï¼‰
```

### â­ æ”¶è—æ¨¡å—

```
GET   /api/v1/favorites       # è·å–æ”¶è—åˆ—è¡¨ï¼ˆéœ€ç™»å½•ï¼‰
POST  /api/v1/favorites/check # æ‰¹é‡æ£€æŸ¥æ”¶è—çŠ¶æ€
```

### ğŸ” æœç´¢æ¨¡å—

```
GET  /api/v1/search/recipes      # æœç´¢é£Ÿè°±
GET  /api/v1/search/hot-keywords # è·å–çƒ­é—¨æœç´¢è¯
GET  /api/v1/search/suggestions  # è·å–æœç´¢å»ºè®®
```

### ğŸ›’ è´­ç‰©æ¸…å•æ¨¡å—

```
GET    /api/v1/shopping-list           # è·å–è´­ç‰©æ¸…å•ï¼ˆéœ€ç™»å½•ï¼‰
POST   /api/v1/shopping-list           # æ·»åŠ è´­ç‰©æ¸…å•é¡¹ï¼ˆéœ€ç™»å½•ï¼‰
PATCH  /api/v1/shopping-list/:id       # æ›´æ–°è´­ç‰©æ¸…å•é¡¹ï¼ˆéœ€ç™»å½•ï¼‰
DELETE /api/v1/shopping-list           # æ¸…ç©ºè´­ç‰©æ¸…å•ï¼ˆéœ€ç™»å½•ï¼‰
DELETE /api/v1/shopping-list/checked   # åˆ é™¤å·²å‹¾é€‰é¡¹ï¼ˆéœ€ç™»å½•ï¼‰
```

### ğŸ“Š ç»Ÿè®¡æ¨¡å—

```
GET  /api/v1/stats/overview     # è·å–ç»Ÿè®¡æ¦‚è§ˆ
GET  /api/v1/stats/hot-recipes  # è·å–çƒ­é—¨é£Ÿè°±
GET  /api/v1/home/feed          # è·å–é¦–é¡µæ¨è
```

### ğŸ“¤ ä¸Šä¼ æ¨¡å—

```
POST /api/v1/upload/image   # ä¸Šä¼ å•å¼ å›¾ç‰‡ï¼ˆéœ€ç™»å½•ï¼‰
POST /api/v1/upload/images  # ä¸Šä¼ å¤šå¼ å›¾ç‰‡ï¼ˆéœ€ç™»å½•ï¼‰
```

---

## 3. è®¤è¯è¯´æ˜

### 3.1 è·å– Token

```javascript
// 1. å¾®ä¿¡ç™»å½•è·å– code
wx.login({
  success: (res) => {
    const code = res.code
    
    // 2. å‘é€ code åˆ°åç«¯
    wx.request({
      url: `${API_BASE_URL}/auth/wx-login`,
      method: 'POST',
      data: { code },
      success: (res) => {
        const { token, userInfo } = res.data.data
        
        // 3. ä¿å­˜ token
        wx.setStorageSync('cooktip_token', token)
        wx.setStorageSync('cooktip_userInfo', userInfo)
      }
    })
  }
})
```

### 3.2 ä½¿ç”¨ Token

```javascript
// åœ¨éœ€è¦ç™»å½•çš„æ¥å£è¯·æ±‚å¤´ä¸­æ·»åŠ 
wx.request({
  url: `${API_BASE_URL}/recipes`,
  method: 'POST',
  header: {
    'Authorization': `Bearer ${wx.getStorageSync('cooktip_token')}`
  },
  data: { /* ... */ }
})
```

### 3.3 Token åˆ·æ–°

```javascript
// å½“ token è¿‡æœŸæ—¶ï¼ˆæ”¶åˆ° 401 å“åº”ï¼‰
wx.request({
  url: `${API_BASE_URL}/auth/refresh`,
  method: 'POST',
  header: {
    'Authorization': `Bearer ${oldToken}`
  },
  success: (res) => {
    const { token } = res.data.data
    wx.setStorageSync('cooktip_token', token)
  }
})
```

---

## 4. æ¥å£è¯¦æƒ…

### 4.1 å¥åº·æ£€æŸ¥

#### GET /

**ç”¨é€”**ï¼šæ£€æŸ¥ API æ˜¯å¦è¿è¡Œ

**è¯·æ±‚**ï¼š
```javascript
wx.request({
  url: 'https://yjsp-ytg-191595-4-1367462091.sh.run.tcloudbase.com/',
  method: 'GET'
})
```

**å“åº”**ï¼š
```json
{
  "status": "ok",
  "message": "CookTip API is running",
  "timestamp": "2025-10-09T13:00:00.000Z"
}
```

---

### 4.2 å¾®ä¿¡ç™»å½•

#### POST /api/v1/auth/wx-login

**ç”¨é€”**ï¼šå¾®ä¿¡å°ç¨‹åºç™»å½•ï¼Œè·å– token

**è¯·æ±‚**ï¼š
```javascript
{
  "code": "å¾®ä¿¡ç™»å½•è¿”å›çš„ code"
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "userInfo": {
      "id": 1,
      "openid": "xxxxx",
      "nickname": "ç”¨æˆ·æ˜µç§°",
      "avatar": "å¤´åƒURL"
    }
  }
}
```

---

### 4.3 è·å–é£Ÿè°±åˆ—è¡¨

#### GET /api/v1/recipes

**ç”¨é€”**ï¼šè·å–é£Ÿè°±åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æ’åº

**æŸ¥è¯¢å‚æ•°**ï¼š
```javascript
{
  page: 1,              // é¡µç ï¼ˆé»˜è®¤ 1ï¼‰
  limit: 10,            // æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤ 10ï¼‰
  categoryId: 1,        // åˆ†ç±» IDï¼ˆå¯é€‰ï¼‰
  difficulty: 'ç®€å•',   // éš¾åº¦ï¼šç®€å•ã€ä¸­ç­‰ã€å›°éš¾ï¼ˆå¯é€‰ï¼‰
  sort: 'recommended',  // æ’åºï¼šrecommendedã€latestã€hotï¼ˆå¯é€‰ï¼‰
  keyword: 'ç•ªèŒ„'       // æœç´¢å…³é”®è¯ï¼ˆå¯é€‰ï¼‰
}
```

**è¯·æ±‚**ï¼š
```javascript
wx.request({
  url: `${API_BASE_URL}/recipes`,
  method: 'GET',
  data: {
    page: 1,
    limit: 10,
    sort: 'recommended'
  }
})
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "items": [
      {
        "id": 1,
        "title": "ç•ªèŒ„ç‚’è›‹",
        "cover_image": "https://796a-yjsp-wxxcx-2g4wvlv66f316313-1367462091.storage.ap-shanghai.myqcloud.com/laoxiangji/ç•ªèŒ„é¸¡è›‹é¢.jpg",
        "description": "ç»å…¸å®¶å¸¸èœ",
        "difficulty": "ç®€å•",
        "cook_time": 15,
        "servings": 2,
        "category": {
          "id": 1,
          "name": "ä¸­é¤"
        },
        "likes": 100,
        "favorites": 50,
        "views": 1000
      }
    ],
    "total": 198,
    "page": 1,
    "limit": 10
  }
}
```

---

### 4.4 è·å–é£Ÿè°±è¯¦æƒ…

#### GET /api/v1/recipes/:id

**ç”¨é€”**ï¼šè·å–å•ä¸ªé£Ÿè°±çš„è¯¦ç»†ä¿¡æ¯

**è¯·æ±‚**ï¼š
```javascript
wx.request({
  url: `${API_BASE_URL}/recipes/1`,
  method: 'GET'
})
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "id": 1,
    "title": "ç•ªèŒ„ç‚’è›‹",
    "cover_image": "https://...",
    "description": "ç»å…¸å®¶å¸¸èœ",
    "difficulty": "ç®€å•",
    "cook_time": 15,
    "servings": 2,
    "taste": "é…¸ç”œ",
    "ingredients": [
      {
        "name": "ç•ªèŒ„",
        "amount": "2ä¸ª"
      },
      {
        "name": "é¸¡è›‹",
        "amount": "3ä¸ª"
      }
    ],
    "steps": [
      {
        "step": 1,
        "description": "ç•ªèŒ„åˆ‡å—",
        "image": "https://..."
      }
    ],
    "tips": "ç‚’é¸¡è›‹æ—¶ç«ä¸è¦å¤ªå¤§",
    "tags": ["å®¶å¸¸èœ", "å¿«æ‰‹èœ"],
    "nutrition": {
      "calories": "300kcal",
      "protein": "15g",
      "fat": "10g",
      "carbs": "40g"
    },
    "category": {
      "id": 1,
      "name": "ä¸­é¤"
    },
    "user": {
      "id": 1,
      "nickname": "ç¾é£Ÿè¾¾äºº",
      "avatar": "https://..."
    },
    "likes": 100,
    "favorites": 50,
    "comments": 20,
    "views": 1000,
    "created_at": "2025-10-09T10:00:00.000Z"
  }
}
```

---

### 4.5 è·å–åˆ†ç±»åˆ—è¡¨

#### GET /api/v1/categories

**ç”¨é€”**ï¼šè·å–æ‰€æœ‰é£Ÿè°±åˆ†ç±»

**è¯·æ±‚**ï¼š
```javascript
wx.request({
  url: `${API_BASE_URL}/categories`,
  method: 'GET'
})
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "name": "ä¸­é¤",
      "icon": "https://...",
      "description": "ä¼ ç»Ÿä¸­å¼ç¾é£Ÿ",
      "sort_order": 1
    },
    {
      "id": 2,
      "name": "è¥¿é¤",
      "icon": "https://...",
      "description": "è¥¿å¼æ–™ç†",
      "sort_order": 2
    }
  ]
}
```

---

### 4.6 ç‚¹èµé£Ÿè°±

#### POST /api/v1/recipes/:id/like

**ç”¨é€”**ï¼šç‚¹èµæˆ–å–æ¶ˆç‚¹èµé£Ÿè°±ï¼ˆéœ€ç™»å½•ï¼‰

**è¯·æ±‚**ï¼š
```javascript
wx.request({
  url: `${API_BASE_URL}/recipes/1/like`,
  method: 'POST',
  header: {
    'Authorization': `Bearer ${token}`
  }
})
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "isLiked": true,
    "likes": 101
  }
}
```

---

### 4.7 æ”¶è—é£Ÿè°±

#### POST /api/v1/recipes/:id/favorite

**ç”¨é€”**ï¼šæ”¶è—æˆ–å–æ¶ˆæ”¶è—é£Ÿè°±ï¼ˆéœ€ç™»å½•ï¼‰

**è¯·æ±‚**ï¼š
```javascript
wx.request({
  url: `${API_BASE_URL}/recipes/1/favorite`,
  method: 'POST',
  header: {
    'Authorization': `Bearer ${token}`
  }
})
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "isFavorited": true,
    "favorites": 51
  }
}
```

---

### 4.8 å‘è¡¨è¯„è®º

#### POST /api/v1/recipes/:recipeId/comments

**ç”¨é€”**ï¼šå‘è¡¨è¯„è®ºï¼ˆéœ€ç™»å½•ï¼‰

**è¯·æ±‚**ï¼š
```javascript
{
  "content": "è¿™é“èœçœŸå¥½åƒï¼",
  "rating": 5
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "id": 1,
    "content": "è¿™é“èœçœŸå¥½åƒï¼",
    "rating": 5,
    "user": {
      "id": 1,
      "nickname": "ç”¨æˆ·æ˜µç§°",
      "avatar": "https://..."
    },
    "created_at": "2025-10-09T13:00:00.000Z"
  }
}
```

---

### 4.9 æœç´¢é£Ÿè°±

#### GET /api/v1/search/recipes

**ç”¨é€”**ï¼šæœç´¢é£Ÿè°±

**æŸ¥è¯¢å‚æ•°**ï¼š
```javascript
{
  keyword: 'ç•ªèŒ„',     // æœç´¢å…³é”®è¯
  page: 1,
  limit: 10
}
```

**è¯·æ±‚**ï¼š
```javascript
wx.request({
  url: `${API_BASE_URL}/search/recipes`,
  method: 'GET',
  data: {
    keyword: 'ç•ªèŒ„',
    page: 1,
    limit: 10
  }
})
```

**å“åº”**ï¼šåŒé£Ÿè°±åˆ—è¡¨æ ¼å¼

---

### 4.10 ä¸Šä¼ å›¾ç‰‡

#### POST /api/v1/upload/image

**ç”¨é€”**ï¼šä¸Šä¼ å›¾ç‰‡ï¼ˆéœ€ç™»å½•ï¼‰

**è¯·æ±‚**ï¼š
```javascript
wx.chooseImage({
  count: 1,
  success: (res) => {
    const tempFilePath = res.tempFilePaths[0]
    
    wx.uploadFile({
      url: `${API_BASE_URL}/upload/image`,
      filePath: tempFilePath,
      name: 'file',
      header: {
        'Authorization': `Bearer ${token}`
      },
      success: (res) => {
        const data = JSON.parse(res.data)
        console.log('å›¾ç‰‡URL:', data.data.url)
      }
    })
  }
})
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "url": "https://796a-yjsp-wxxcx-2g4wvlv66f316313-1367462091.storage.ap-shanghai.myqcloud.com/uploads/xxx.jpg",
    "filename": "xxx.jpg",
    "size": 102400
  }
}
```

---

## 5. é”™è¯¯å¤„ç†

### 5.1 å¸¸è§é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ | å¤„ç†æ–¹å¼ |
|--------|------|----------|
| 200 | æˆåŠŸ | - |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | æ£€æŸ¥è¯·æ±‚å‚æ•° |
| 401 | æœªç™»å½•æˆ– Token è¿‡æœŸ | é‡æ–°ç™»å½•æˆ–åˆ·æ–° Token |
| 403 | æ— æƒé™ | æç¤ºç”¨æˆ·æ— æƒé™æ“ä½œ |
| 404 | èµ„æºä¸å­˜åœ¨ | æç¤ºèµ„æºä¸å­˜åœ¨ |
| 429 | è¯·æ±‚è¿‡äºé¢‘ç¹ | é™æµï¼Œç¨åé‡è¯• |
| 500 | æœåŠ¡å™¨é”™è¯¯ | æç¤ºç”¨æˆ·ç¨åé‡è¯• |

### 5.2 é”™è¯¯å¤„ç†ç¤ºä¾‹

```javascript
// utils/request.js
function request(options) {
  const token = wx.getStorageSync('cooktip_token')
  
  return new Promise((resolve, reject) => {
    wx.request({
      ...options,
      header: {
        ...options.header,
        'Authorization': token ? `Bearer ${token}` : ''
      },
      success: (res) => {
        if (res.statusCode === 200) {
          resolve(res.data)
        } else if (res.statusCode === 401) {
          // Token è¿‡æœŸï¼Œé‡æ–°ç™»å½•
          wx.navigateTo({
            url: '/pages/login/login'
          })
          reject(new Error('è¯·å…ˆç™»å½•'))
        } else {
          wx.showToast({
            title: res.data.message || 'è¯·æ±‚å¤±è´¥',
            icon: 'none'
          })
          reject(res.data)
        }
      },
      fail: (err) => {
        wx.showToast({
          title: 'ç½‘ç»œé”™è¯¯',
          icon: 'none'
        })
        reject(err)
      }
    })
  })
}
```

---

## 6. å°ç¨‹åºé…ç½®

### 6.1 æœåŠ¡å™¨åŸŸåç™½åå•

åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é…ç½®ä»¥ä¸‹åŸŸåï¼š

**request åˆæ³•åŸŸå**ï¼š
```
https://yjsp-ytg-191595-4-1367462091.sh.run.tcloudbase.com
```

**uploadFile åˆæ³•åŸŸå**ï¼š
```
https://yjsp-ytg-191595-4-1367462091.sh.run.tcloudbase.com
```

**downloadFile åˆæ³•åŸŸå**ï¼š
```
https://796a-yjsp-wxxcx-2g4wvlv66f316313-1367462091.storage.ap-shanghai.myqcloud.com
```

**âš ï¸ é‡è¦æç¤º**ï¼š
- åŸŸåé…ç½®åéœ€è¦ 5-10 åˆ†é’Ÿç”Ÿæ•ˆ
- å¿…é¡»é…ç½®åŸŸåç™½åå•ï¼Œå¦åˆ™å°ç¨‹åºæ— æ³•è®¿é—®
- å…¬ç½‘åŸŸåä»…ç”¨äºæµ‹è¯•ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½®è‡ªå®šä¹‰åŸŸå

### 6.2 å¼€å‘ç¯å¢ƒé…ç½®

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼š
- è¯¦æƒ… â†’ æœ¬åœ°è®¾ç½®
- å‹¾é€‰ "ä¸æ ¡éªŒåˆæ³•åŸŸåã€web-viewï¼ˆä¸šåŠ¡åŸŸåï¼‰ã€TLS ç‰ˆæœ¬ä»¥åŠ HTTPS è¯ä¹¦"

---

## 7. å¿«é€Ÿå¼€å§‹ç¤ºä¾‹

### 7.1 å®Œæ•´çš„é¦–é¡µåŠ è½½ç¤ºä¾‹

```javascript
// pages/index/index.js
Page({
  data: {
    categories: [],
    recipes: [],
    hotRecipes: []
  },
  
  onLoad() {
    this.loadData()
  },
  
  async loadData() {
    try {
      // 1. åŠ è½½åˆ†ç±»
      const categoriesRes = await request({
        url: `${API_BASE_URL}/categories`,
        method: 'GET'
      })
      this.setData({
        categories: categoriesRes.data
      })
      
      // 2. åŠ è½½æ¨èé£Ÿè°±
      const recipesRes = await request({
        url: `${API_BASE_URL}/recipes`,
        method: 'GET',
        data: {
          page: 1,
          limit: 10,
          sort: 'recommended'
        }
      })
      this.setData({
        recipes: recipesRes.data.items
      })
      
      // 3. åŠ è½½çƒ­é—¨é£Ÿè°±
      const hotRes = await request({
        url: `${API_BASE_URL}/stats/hot-recipes`,
        method: 'GET'
      })
      this.setData({
        hotRecipes: hotRes.data
      })
      
    } catch (error) {
      console.error('åŠ è½½å¤±è´¥:', error)
    }
  }
})
```

---

## 8. æ³¨æ„äº‹é¡¹

### 8.1 æ€§èƒ½ä¼˜åŒ–

1. **å›¾ç‰‡æ‡’åŠ è½½**ï¼šä½¿ç”¨å°ç¨‹åºçš„ `lazy-load` å±æ€§
2. **åˆ—è¡¨åˆ†é¡µ**ï¼šä½¿ç”¨ä¸Šæ‹‰åŠ è½½æ›´å¤š
3. **ç¼“å­˜ç­–ç•¥**ï¼šåˆç†ä½¿ç”¨ `wx.setStorage` ç¼“å­˜æ•°æ®
4. **è¯·æ±‚é˜²æŠ–**ï¼šé¿å…é‡å¤è¯·æ±‚

### 8.2 é”™è¯¯å¤„ç†

1. **ç½‘ç»œé”™è¯¯**ï¼šæç¤ºç”¨æˆ·æ£€æŸ¥ç½‘ç»œ
2. **Token è¿‡æœŸ**ï¼šè‡ªåŠ¨è·³è½¬ç™»å½•é¡µ
3. **è¯·æ±‚è¶…æ—¶**ï¼šè®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´ï¼ˆ10ç§’ï¼‰

### 8.3 æ•°æ®æ ¼å¼

1. **æ—¶é—´æ ¼å¼**ï¼šISO 8601 æ ¼å¼ï¼ˆ`2025-10-09T13:00:00.000Z`ï¼‰
2. **å›¾ç‰‡ URL**ï¼šå®Œæ•´çš„ HTTPS URL
3. **JSON å­—æ®µ**ï¼šingredientsã€stepsã€nutrition ç­‰æ˜¯ JSON å¯¹è±¡

---

## 9. è”ç³»æ–¹å¼

- **API æ–‡æ¡£**ï¼šhttps://yjsp-ytg-191595-4-1367462091.sh.run.tcloudbase.com/api/docs
- **é—®é¢˜åé¦ˆ**ï¼šGitHub Issues

---

**æ›´æ–°æ—¥å¿—**ï¼š

- 2025-10-16ï¼š**ç´§æ€¥ä¿®å¤** - æ›´æ–°ä¸ºæ­£ç¡®çš„å…¬ç½‘è®¿é—®åœ°å€
  - ä¿®å¤ï¼šå‰ç«¯æ— æ³•è¿æ¥åç«¯çš„é—®é¢˜
  - åŸå› ï¼šä¹‹å‰ä½¿ç”¨çš„æ˜¯å†…ç½‘åœ°å€ï¼Œå¤–éƒ¨æ— æ³•è®¿é—®
  - è§£å†³ï¼šæ”¹ä¸ºå…¬ç½‘è®¿é—®åœ°å€
  - æé†’ï¼šå…¬ç½‘åŸŸåä»…ç”¨äºæµ‹è¯•ï¼Œç”Ÿäº§ç¯å¢ƒéœ€é…ç½®è‡ªå®šä¹‰åŸŸå
- 2025-10-09ï¼šæ–°ç‰ˆæ–‡æ¡£ï¼Œæ•°æ®åº“è¿ç§»åˆ°å¾®ä¿¡äº‘æ‰˜ç®¡ï¼Œå›¾ç‰‡è¿ç§»åˆ°å¯¹è±¡å­˜å‚¨
- æ·»åŠ å¥åº·æ£€æŸ¥ç«¯ç‚¹
- æ‰€æœ‰æ¥å£è·¯å¾„ç¡®è®¤
- å®Œæ•´çš„é”™è¯¯å¤„ç†è¯´æ˜

---

**ç¥å¼€å‘é¡ºåˆ©ï¼** ğŸš€

