# å¯¹è±¡å­˜å‚¨å›¾ç‰‡ä¿®å¤å®Œæ•´æ–¹æ¡ˆ

## ğŸ“‹ å½“å‰æƒ…å†µåˆ†æ

### å·²ç¡®è®¤ä¿¡æ¯
- **å¯¹è±¡å­˜å‚¨æ¡¶åŸŸå**ï¼š`https://yjsp-1367462091.cos.ap-nanjing.myqcloud.com`
- **å­˜å‚¨ä½ç½®**ï¼šè…¾è®¯äº‘COSï¼ˆå—äº¬åŒºåŸŸï¼‰
- **é—®é¢˜ç°è±¡**ï¼š
  1. å‰ç«¯æŠ¥é”™ï¼š`no such file or directory: E:\å‰ç«¯é¡¹ç›®æ–‡æ¡£\é¡¹ç›®æ–‡ä»¶å¤¹\CookTip\images\empty\no-search.png`
  2. å°é¢æ— æ³•åŠ è½½

### é—®é¢˜æ ¹æº
1. âŒ å‰ç«¯ä½¿ç”¨äº†**æœ¬åœ°ç»å¯¹è·¯å¾„**ï¼ˆWindowsè·¯å¾„ï¼‰
2. âŒ æœªé…ç½®COSåŸŸåçš„ç»Ÿä¸€ç®¡ç†
3. âŒ å¯èƒ½æœªåœ¨å°ç¨‹åºåå°é…ç½® downloadFile åˆæ³•åŸŸå

---

## âœ… å®Œæ•´ä¿®å¤æ–¹æ¡ˆ

### æ­¥éª¤1ï¼šé…ç½®å°ç¨‹åºåˆæ³•åŸŸåï¼ˆå¿…é¡»ï¼‰

#### 1.1 ç™»å½•å¾®ä¿¡å°ç¨‹åºåå°
è®¿é—®ï¼šhttps://mp.weixin.qq.com

#### 1.2 é…ç½®æœåŠ¡å™¨åŸŸå
è¿›å…¥ï¼š**å¼€å‘ç®¡ç†** â†’ **å¼€å‘è®¾ç½®** â†’ **æœåŠ¡å™¨åŸŸå**

#### 1.3 æ·»åŠ  downloadFile åˆæ³•åŸŸå
```
https://yjsp-1367462091.cos.ap-nanjing.myqcloud.com
```

âš ï¸ **é‡è¦è¯´æ˜**ï¼š
- åŸŸåå¿…é¡»æ˜¯ `https://` å¼€å¤´
- ä¸èƒ½åŒ…å«ç«¯å£å·
- å¿…é¡»å·²ç»å®ŒæˆICPå¤‡æ¡ˆï¼ˆè…¾è®¯äº‘COSé»˜è®¤åŸŸåæ— éœ€å¤‡æ¡ˆï¼‰
- é…ç½®åéœ€è¦ç­‰å¾…å‡ åˆ†é’Ÿç”Ÿæ•ˆ

#### 1.4 éªŒè¯é…ç½®
åœ¨å°ç¨‹åºå¼€å‘è€…å·¥å…·ä¸­ï¼Œæ‰“å¼€ **è¯¦æƒ…** â†’ **é¡¹ç›®é…ç½®**ï¼Œç¡®ä¿ï¼š
- âœ… ä¸æ ¡éªŒåˆæ³•åŸŸåï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰
- æˆ–è€…ç¡®è®¤å·²é…ç½®çš„åŸŸåç”Ÿæ•ˆ

---

### æ­¥éª¤2ï¼šåç«¯ç¯å¢ƒå˜é‡é…ç½®

#### 2.1 æ›´æ–°äº‘æ‰˜ç®¡ç¯å¢ƒå˜é‡
åœ¨**è…¾è®¯äº‘æ‰˜ç®¡æ§åˆ¶å°**ä¸­ï¼Œæ›´æ–°ç¯å¢ƒå˜é‡ï¼š

```bash
CDN_BASE_URL=https://yjsp-1367462091.cos.ap-nanjing.myqcloud.com
```

#### 2.2 éªŒè¯åç«¯è¿”å›çš„å›¾ç‰‡URL
è°ƒç”¨APIæŸ¥çœ‹è¿”å›çš„å›¾ç‰‡URLæ ¼å¼ï¼š
```bash
# åº”è¯¥è¿”å›ç±»ä¼¼ï¼š
{
  "cover": "https://yjsp-1367462091.cos.ap-nanjing.myqcloud.com/uploads/cover_xxx.jpg"
}
```

---

### æ­¥éª¤3ï¼šå‰ç«¯CDNé…ç½®æ–‡ä»¶ï¼ˆæ ¸å¿ƒï¼‰

#### 3.1 åˆ›å»ºé…ç½®æ–‡ä»¶
åœ¨å°ç¨‹åºé¡¹ç›®ä¸­åˆ›å»º `config/cdn.js`ï¼š

```javascript
/**
 * CDNå’Œå¯¹è±¡å­˜å‚¨é…ç½®
 * ç»Ÿä¸€ç®¡ç†æ‰€æœ‰å›¾ç‰‡ã€è§†é¢‘ç­‰èµ„æºçš„è®¿é—®è·¯å¾„
 */

// è…¾è®¯äº‘COSå¯¹è±¡å­˜å‚¨åŸºç¡€URL
const COS_BASE_URL = 'https://yjsp-1367462091.cos.ap-nanjing.myqcloud.com';

// CDNé…ç½®
const CDN_CONFIG = {
  // åŸºç¡€URL
  baseUrl: COS_BASE_URL,
  
  // å ä½å›¾ï¼ˆå½“å›¾ç‰‡åŠ è½½å¤±è´¥æˆ–æ— æ•°æ®æ—¶æ˜¾ç¤ºï¼‰
  placeholders: {
    // æ— æœç´¢ç»“æœ
    noSearch: `${COS_BASE_URL}/images/empty/no-search.png`,
    // æ— æ•°æ®
    noData: `${COS_BASE_URL}/images/empty/no-data.png`,
    // æ— é£Ÿè°±
    noRecipe: `${COS_BASE_URL}/images/empty/no-recipe.png`,
    // æ— è¯„è®º
    noComment: `${COS_BASE_URL}/images/empty/no-comment.png`,
  },
  
  // é»˜è®¤å›¾ç‰‡ï¼ˆå½“èµ„æºä¸å­˜åœ¨æ—¶çš„åå¤‡å›¾ï¼‰
  defaults: {
    // é»˜è®¤å¤´åƒ
    avatar: `${COS_BASE_URL}/images/default/avatar.png`,
    // é»˜è®¤é£Ÿè°±å°é¢
    recipeCover: `${COS_BASE_URL}/images/default/recipe-cover.png`,
    // é»˜è®¤è§†é¢‘å°é¢
    videoCover: `${COS_BASE_URL}/images/default/video-cover.png`,
    // é»˜è®¤åˆ†ç±»å›¾æ ‡
    categoryIcon: `${COS_BASE_URL}/images/default/category.png`,
  },
  
  // èµ„æºè·¯å¾„å‰ç¼€
  paths: {
    uploads: '/uploads',        // ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶
    images: '/images',          // é™æ€å›¾ç‰‡
    videos: '/videos',          // è§†é¢‘æ–‡ä»¶
    avatars: '/avatars',        // ç”¨æˆ·å¤´åƒ
    recipes: '/recipes',        // é£Ÿè°±ç›¸å…³
    categories: '/categories',  // åˆ†ç±»å›¾æ ‡
  }
};

/**
 * è·å–å®Œæ•´çš„CDN URL
 * @param {string} path - ç›¸å¯¹è·¯å¾„æˆ–å®Œæ•´URL
 * @returns {string} å®Œæ•´çš„URL
 */
function getCdnUrl(path) {
  // å¦‚æœæ²¡æœ‰è·¯å¾„ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²
  if (!path) {
    return '';
  }
  
  // å¦‚æœå·²ç»æ˜¯å®Œæ•´çš„URLï¼ˆhttp:// æˆ– https://ï¼‰ï¼Œç›´æ¥è¿”å›
  if (path.startsWith('http://') || path.startsWith('https://')) {
    return path;
  }
  
  // å¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œæ‹¼æ¥COSåŸºç¡€URL
  const separator = path.startsWith('/') ? '' : '/';
  return `${COS_BASE_URL}${separator}${path}`;
}

/**
 * å¤„ç†å›¾ç‰‡URLæ•°ç»„
 * @param {Array<string>} urls - URLæ•°ç»„
 * @returns {Array<string>} å¤„ç†åçš„URLæ•°ç»„
 */
function getCdnUrls(urls) {
  if (!Array.isArray(urls)) {
    return [];
  }
  return urls.map(url => getCdnUrl(url));
}

/**
 * è·å–å ä½å›¾URL
 * @param {string} type - å ä½å›¾ç±»å‹
 * @returns {string} å ä½å›¾URL
 */
function getPlaceholder(type = 'noData') {
  return CDN_CONFIG.placeholders[type] || CDN_CONFIG.placeholders.noData;
}

/**
 * è·å–é»˜è®¤å›¾URL
 * @param {string} type - é»˜è®¤å›¾ç±»å‹
 * @returns {string} é»˜è®¤å›¾URL
 */
function getDefaultImage(type = 'recipeCover') {
  return CDN_CONFIG.defaults[type] || CDN_CONFIG.defaults.recipeCover;
}

/**
 * å¤„ç†é£Ÿè°±æ•°æ®ä¸­çš„å›¾ç‰‡URL
 * @param {Object} recipe - é£Ÿè°±å¯¹è±¡
 * @returns {Object} å¤„ç†åçš„é£Ÿè°±å¯¹è±¡
 */
function processRecipeImages(recipe) {
  if (!recipe) return recipe;
  
  return {
    ...recipe,
    // å¤„ç†å°é¢å›¾
    cover: recipe.cover ? getCdnUrl(recipe.cover) : getDefaultImage('recipeCover'),
    coverImage: recipe.coverImage ? getCdnUrl(recipe.coverImage) : getDefaultImage('recipeCover'),
    
    // å¤„ç†è§†é¢‘å°é¢
    videoCover: recipe.videoCover ? getCdnUrl(recipe.videoCover) : getDefaultImage('videoCover'),
    
    // å¤„ç†æ­¥éª¤å›¾ç‰‡
    steps: Array.isArray(recipe.steps) ? recipe.steps.map(step => ({
      ...step,
      image: step.image ? getCdnUrl(step.image) : ''
    })) : recipe.steps,
    
    // å¤„ç†ä½œè€…å¤´åƒ
    author: recipe.author ? {
      ...recipe.author,
      avatar: recipe.author.avatar ? getCdnUrl(recipe.author.avatar) : getDefaultImage('avatar')
    } : recipe.author
  };
}

/**
 * å¤„ç†ç”¨æˆ·æ•°æ®ä¸­çš„å›¾ç‰‡URL
 * @param {Object} user - ç”¨æˆ·å¯¹è±¡
 * @returns {Object} å¤„ç†åçš„ç”¨æˆ·å¯¹è±¡
 */
function processUserImages(user) {
  if (!user) return user;
  
  return {
    ...user,
    avatar: user.avatar ? getCdnUrl(user.avatar) : getDefaultImage('avatar')
  };
}

// å¯¼å‡ºé…ç½®å’Œå·¥å…·å‡½æ•°
module.exports = {
  CDN_CONFIG,
  COS_BASE_URL,
  getCdnUrl,
  getCdnUrls,
  getPlaceholder,
  getDefaultImage,
  processRecipeImages,
  processUserImages
};
```

---

### æ­¥éª¤4ï¼šä¿®å¤å‰ç«¯ä»£ç 

#### 4.1 ä¿®å¤æœç´¢é¡µé¢çš„å ä½å›¾

**åŸå§‹ä»£ç ï¼ˆé”™è¯¯ï¼‰**ï¼š
```javascript
// âŒ ä½¿ç”¨äº†æœ¬åœ°ç»å¯¹è·¯å¾„
const placeholderImage = 'E:\\å‰ç«¯é¡¹ç›®æ–‡æ¡£\\é¡¹ç›®æ–‡ä»¶å¤¹\\CookTip\\images\\empty\\no-search.png';
```

**ä¿®å¤åä»£ç **ï¼š
```javascript
// âœ… ä½¿ç”¨CDNé…ç½®
import { getPlaceholder } from '@/config/cdn';

Page({
  data: {
    placeholderImage: getPlaceholder('noSearch'),
    searchResults: []
  }
});
```

#### 4.2 ä¿®å¤é£Ÿè°±åˆ—è¡¨çš„å›¾ç‰‡åŠ è½½

**pages/index/index.js**ï¼š
```javascript
import { processRecipeImages } from '@/config/cdn';
import api from '@/utils/api';

Page({
  data: {
    recipes: [],
    loading: false
  },
  
  /**
   * åŠ è½½é£Ÿè°±åˆ—è¡¨
   */
  async loadRecipes() {
    try {
      this.setData({ loading: true });
      
      const response = await api.getRecipeList({
        page: 1,
        limit: 10,
        sort: 'recommended'
      });
      
      // å¤„ç†è¿”å›æ•°æ®ä¸­çš„å›¾ç‰‡URL
      const recipes = response.data.map(recipe => processRecipeImages(recipe));
      
      this.setData({ 
        recipes,
        loading: false 
      });
      
    } catch (error) {
      console.error('åŠ è½½é£Ÿè°±å¤±è´¥:', error);
      this.setData({ loading: false });
      
      wx.showToast({
        title: 'åŠ è½½å¤±è´¥',
        icon: 'none'
      });
    }
  }
});
```

#### 4.3 æ·»åŠ å›¾ç‰‡åŠ è½½å¤±è´¥å¤„ç†

**pages/index/index.wxml**ï¼š
```xml
<!-- é£Ÿè°±å°é¢ï¼Œå¸¦é”™è¯¯å¤„ç† -->
<image 
  class="recipe-cover"
  src="{{item.cover}}" 
  mode="aspectFill"
  binderror="onImageError"
  data-index="{{index}}"
  data-type="cover"
/>

<!-- è§†é¢‘å°é¢ï¼Œå¸¦é”™è¯¯å¤„ç† -->
<image 
  class="video-cover"
  src="{{item.videoCover}}" 
  mode="aspectFill"
  binderror="onImageError"
  data-index="{{index}}"
  data-type="videoCover"
/>
```

**pages/index/index.js**ï¼š
```javascript
import { getDefaultImage } from '@/config/cdn';

Page({
  /**
   * å›¾ç‰‡åŠ è½½å¤±è´¥å¤„ç†
   */
  onImageError(e) {
    const { index, type } = e.currentTarget.dataset;
    const defaultImage = getDefaultImage(type || 'recipeCover');
    
    console.warn(`å›¾ç‰‡åŠ è½½å¤±è´¥ [ç´¢å¼•:${index}, ç±»å‹:${type}]:`, e.detail);
    
    // æ›¿æ¢ä¸ºé»˜è®¤å›¾ç‰‡
    const key = `recipes[${index}].${type}`;
    this.setData({
      [key]: defaultImage
    });
  }
});
```

---

### æ­¥éª¤5ï¼šä¸Šä¼ å ä½å›¾å’Œé»˜è®¤å›¾åˆ°COS

#### 5.1 éœ€è¦ä¸Šä¼ çš„å›¾ç‰‡åˆ—è¡¨

åœ¨COSå¯¹è±¡å­˜å‚¨ä¸­ï¼Œåˆ›å»ºä»¥ä¸‹ç›®å½•ç»“æ„å¹¶ä¸Šä¼ å¯¹åº”å›¾ç‰‡ï¼š

```
yjsp-1367462091/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ empty/
â”‚   â”‚   â”œâ”€â”€ no-search.png      ï¼ˆæ— æœç´¢ç»“æœå ä½å›¾ï¼‰
â”‚   â”‚   â”œâ”€â”€ no-data.png         ï¼ˆæ— æ•°æ®å ä½å›¾ï¼‰
â”‚   â”‚   â”œâ”€â”€ no-recipe.png       ï¼ˆæ— é£Ÿè°±å ä½å›¾ï¼‰
â”‚   â”‚   â””â”€â”€ no-comment.png      ï¼ˆæ— è¯„è®ºå ä½å›¾ï¼‰
â”‚   â””â”€â”€ default/
â”‚       â”œâ”€â”€ avatar.png          ï¼ˆé»˜è®¤å¤´åƒï¼‰
â”‚       â”œâ”€â”€ recipe-cover.png    ï¼ˆé»˜è®¤é£Ÿè°±å°é¢ï¼‰
â”‚       â”œâ”€â”€ video-cover.png     ï¼ˆé»˜è®¤è§†é¢‘å°é¢ï¼‰
â”‚       â””â”€â”€ category.png        ï¼ˆé»˜è®¤åˆ†ç±»å›¾æ ‡ï¼‰
```

#### 5.2 ä¸Šä¼ æ–¹æ³•

**æ–¹æ³•Aï¼šé€šè¿‡è…¾è®¯äº‘æ§åˆ¶å°ä¸Šä¼ **
1. ç™»å½•è…¾è®¯äº‘æ§åˆ¶å°
2. è¿›å…¥å¯¹è±¡å­˜å‚¨COS
3. é€‰æ‹©å­˜å‚¨æ¡¶ï¼š`yjsp-1367462091`
4. åˆ›å»ºæ–‡ä»¶å¤¹å¹¶ä¸Šä¼ å›¾ç‰‡

**æ–¹æ³•Bï¼šä½¿ç”¨COSå‘½ä»¤è¡Œå·¥å…·**
```bash
# å®‰è£…COSCMDå·¥å…·
pip install coscmd

# é…ç½®
coscmd config -a <SecretId> -s <SecretKey> -b yjsp-1367462091 -r ap-nanjing

# ä¸Šä¼ æ–‡ä»¶å¤¹
coscmd upload -r ./local-images/ /images/
```

#### 5.3 éªŒè¯ä¸Šä¼ æˆåŠŸ

åœ¨æµè§ˆå™¨ä¸­è®¿é—®ä»¥ä¸‹URLï¼Œç¡®è®¤å›¾ç‰‡å¯è®¿é—®ï¼š
```
https://yjsp-1367462091.cos.ap-nanjing.myqcloud.com/images/empty/no-search.png
https://yjsp-1367462091.cos.ap-nanjing.myqcloud.com/images/default/avatar.png
https://yjsp-1367462091.cos.ap-nanjing.myqcloud.com/images/default/recipe-cover.png
https://yjsp-1367462091.cos.ap-nanjing.myqcloud.com/images/default/video-cover.png
```

---

### æ­¥éª¤6ï¼šæµ‹è¯•éªŒè¯

#### 6.1 æµ‹è¯•å ä½å›¾æ˜¾ç¤º
```javascript
// åœ¨å°ç¨‹åºæ§åˆ¶å°æµ‹è¯•
const { getPlaceholder } = require('@/config/cdn');

console.log('æ— æœç´¢ç»“æœå ä½å›¾:', getPlaceholder('noSearch'));
console.log('æ— æ•°æ®å ä½å›¾:', getPlaceholder('noData'));
// è¾“å‡ºåº”è¯¥æ˜¯å®Œæ•´çš„COS URL
```

#### 6.2 æµ‹è¯•å›¾ç‰‡URLå¤„ç†
```javascript
const { getCdnUrl } = require('@/config/cdn');

// æµ‹è¯•ç›¸å¯¹è·¯å¾„
console.log(getCdnUrl('/uploads/recipe_123.jpg'));
// è¾“å‡ºï¼šhttps://yjsp-1367462091.cos.ap-nanjing.myqcloud.com/uploads/recipe_123.jpg

// æµ‹è¯•å®Œæ•´URLï¼ˆä¸åº”ä¿®æ”¹ï¼‰
console.log(getCdnUrl('https://example.com/image.jpg'));
// è¾“å‡ºï¼šhttps://example.com/image.jpg

// æµ‹è¯•ç©ºå€¼
console.log(getCdnUrl(''));
// è¾“å‡ºï¼š''
```

#### 6.3 æµ‹è¯•å›¾ç‰‡åŠ è½½
1. æ‰“å¼€å°ç¨‹åºé¦–é¡µ
2. æŸ¥çœ‹é£Ÿè°±åˆ—è¡¨æ˜¯å¦æ­£å¸¸æ˜¾ç¤ºå°é¢
3. æŸ¥çœ‹è§†é¢‘å°é¢æ˜¯å¦æ­£å¸¸æ˜¾ç¤º
4. æ•…æ„ä½¿ç”¨é”™è¯¯çš„å›¾ç‰‡URLï¼Œæ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºé»˜è®¤å›¾

---

### æ­¥éª¤7ï¼šä¸´æ—¶å ä½å›¾æ–¹æ¡ˆï¼ˆå¯é€‰ï¼‰

å¦‚æœæš‚æ—¶æ— æ³•ä¸Šä¼ å ä½å›¾åˆ°COSï¼Œå¯ä»¥ä½¿ç”¨åœ¨çº¿å ä½å›¾æœåŠ¡ï¼š

```javascript
// config/cdn.js ä¸­çš„ä¸´æ—¶æ–¹æ¡ˆ
const CDN_CONFIG = {
  // ... å…¶ä»–é…ç½® ...
  
  placeholders: {
    // ä½¿ç”¨å ä½å›¾æœåŠ¡ï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰
    noSearch: 'https://via.placeholder.com/400x300/f0f0f0/999999?text=æš‚æ— æœç´¢ç»“æœ',
    noData: 'https://via.placeholder.com/400x300/f0f0f0/999999?text=æš‚æ— æ•°æ®',
    noRecipe: 'https://via.placeholder.com/400x300/f0f0f0/999999?text=æš‚æ— é£Ÿè°±',
    noComment: 'https://via.placeholder.com/400x300/f0f0f0/999999?text=æš‚æ— è¯„è®º',
  },
  
  defaults: {
    avatar: 'https://via.placeholder.com/100x100/4CAF50/ffffff?text=å¤´åƒ',
    recipeCover: 'https://via.placeholder.com/600x400/FF9800/ffffff?text=é£Ÿè°±å°é¢',
    videoCover: 'https://via.placeholder.com/600x400/2196F3/ffffff?text=è§†é¢‘å°é¢',
  }
};
```

âš ï¸ **æ³¨æ„**ï¼šä½¿ç”¨åœ¨çº¿å ä½å›¾æœåŠ¡æ—¶ï¼Œéœ€è¦å°† `via.placeholder.com` æ·»åŠ åˆ°å°ç¨‹åºçš„ downloadFile åˆæ³•åŸŸåä¸­ã€‚

---

## ğŸ¯ å¿«é€Ÿä¿®å¤æ¸…å•

### å¿…é¡»å®Œæˆ
- [ ] åœ¨å°ç¨‹åºåå°é…ç½® downloadFile åˆæ³•åŸŸåï¼š`https://yjsp-1367462091.cos.ap-nanjing.myqcloud.com`
- [ ] åœ¨å‰ç«¯é¡¹ç›®ä¸­åˆ›å»º `config/cdn.js` é…ç½®æ–‡ä»¶
- [ ] ä¿®å¤æ‰€æœ‰ä½¿ç”¨æœ¬åœ°ç»å¯¹è·¯å¾„çš„ä»£ç 
- [ ] åœ¨æ‰€æœ‰å›¾ç‰‡ç»„ä»¶ä¸Šæ·»åŠ  `binderror` é”™è¯¯å¤„ç†

### æ¨èå®Œæˆ
- [ ] ä¸Šä¼ å ä½å›¾å’Œé»˜è®¤å›¾åˆ°COS
- [ ] æ›´æ–°äº‘æ‰˜ç®¡ç¯å¢ƒå˜é‡ `CDN_BASE_URL`
- [ ] ä½¿ç”¨ `processRecipeImages` ç»Ÿä¸€å¤„ç†é£Ÿè°±æ•°æ®
- [ ] æ·»åŠ å›¾ç‰‡åŠ è½½å¤±è´¥çš„ç”¨æˆ·æç¤º

### å¯é€‰ä¼˜åŒ–
- [ ] é…ç½®COSçš„CDNåŠ é€Ÿ
- [ ] å¯ç”¨å›¾ç‰‡ç¼©ç•¥å›¾åŠŸèƒ½
- [ ] æ·»åŠ å›¾ç‰‡æ‡’åŠ è½½
- [ ] é…ç½®å›¾ç‰‡æ°´å°

---

## ğŸ“ å¸¸è§é—®é¢˜

### Q1: é…ç½®å®Œ downloadFile åŸŸååä»ç„¶æ— æ³•åŠ è½½å›¾ç‰‡ï¼Ÿ
**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. åŸŸåé…ç½®æ˜¯å¦å·²ç”Ÿæ•ˆï¼ˆéœ€è¦å‡ åˆ†é’Ÿï¼‰
2. å›¾ç‰‡URLæ˜¯å¦æ­£ç¡®ï¼ˆåœ¨æµè§ˆå™¨ä¸­ç›´æ¥è®¿é—®æµ‹è¯•ï¼‰
3. å°ç¨‹åºå¼€å‘è€…å·¥å…·æ˜¯å¦å‹¾é€‰äº†"ä¸æ ¡éªŒåˆæ³•åŸŸå"
4. COSå­˜å‚¨æ¡¶æƒé™æ˜¯å¦è®¾ç½®ä¸ºå…¬æœ‰è¯»

### Q2: è§†é¢‘å°é¢ä¸æ˜¾ç¤ºï¼Ÿ
**A**: ç¡®è®¤ï¼š
1. åç«¯è¿”å›çš„ `videoCover` å­—æ®µæ˜¯å¦æœ‰å€¼
2. URLæ˜¯å¦æ˜¯å®Œæ•´çš„COSåœ°å€
3. æ˜¯å¦ä½¿ç”¨äº† `processRecipeImages` å¤„ç†æ•°æ®

### Q3: æœ¬åœ°å¼€å‘æ—¶å›¾ç‰‡æ­£å¸¸ï¼Œå‘å¸ƒåæ— æ³•æ˜¾ç¤ºï¼Ÿ
**A**: ç¡®è®¤å°ç¨‹åºåå°çš„ downloadFile åˆæ³•åŸŸåé…ç½®æ˜¯å¦å®Œæ•´ã€‚

---

## ğŸ“ ä¸‹ä¸€æ­¥

å®Œæˆä»¥ä¸Šé…ç½®åï¼Œè¯·ï¼š

1. **é‡å¯å°ç¨‹åºå¼€å‘è€…å·¥å…·**
2. **æ¸…é™¤ç¼“å­˜å¹¶é‡æ–°ç¼–è¯‘**
3. **æµ‹è¯•æ‰€æœ‰æ¶‰åŠå›¾ç‰‡çš„é¡µé¢**
4. **åœ¨çœŸæœºä¸Šæµ‹è¯•éªŒè¯**

å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œè¯·æä¾›ï¼š
- å…·ä½“çš„é”™è¯¯ä¿¡æ¯
- ç½‘ç»œè¯·æ±‚æ—¥å¿—
- å›¾ç‰‡URLç¤ºä¾‹

æˆ‘ä¼šç»§ç»­ååŠ©æ‚¨æ’æŸ¥ï¼

